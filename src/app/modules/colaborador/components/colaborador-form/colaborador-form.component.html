<form [formGroup]="colaboradorForm" (submit)="submitForm()">
    <p-card>
        <div class="grid mb-6 pl-2 pr-2 align-items-center">
            <h2>Formulário de Colaborador</h2>
            <span class="col"></span>
            <div>
                <button pButton type="button" icon="ui-icon-chevron-left" iconPos="left" label="Voltar"
                    (click)="irParaColaboradorList()"></button>
            </div>
        </div>
        <div class="grid">
            <div class="col-12 sm:col-2 md:col-2">
                <span class="ui-float-label">
                    <input id="float-input" type="text" pInputText autocomplete="off" formControlName="nome">
                    <label for="float-input">Nome do Colaborador</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('nome'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('nome'))}}</small>
            </div>
            <div class="col-12 sm:col-4 md:col-4">
                <span class="ui-float-label">
                    <input id="float-input" type="text" pInputText autocomplete="off" formControlName="sobrenome">
                    <label for="float-input">Sobrenome do Colaborador</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('sobrenome'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('sobrenome'))}}</small>
            </div>
            <div class="col-12 sm:col-2 md:col-2">
                <span class="ui-float-label">
                    <input id="float-input" type="text" pInputText autocomplete="off" formControlName="cpf">
                    <label for="float-input">CPF</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('cpf'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('cpf'))}}</small>
            </div>
            <div class="col-12 sm:col-4 md:col-4">
                <span class="ui-float-label">
                    <input id="float-input" type="text" pInputText autocomplete="off" formControlName="email">
                    <label for="float-input">Email</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('email'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('email'))}}</small>
            </div>
            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-calendar dateFormat="dd/mm/yy" formControlName="dataNascimento"></p-calendar>
                    <label for="float-input">Data Nascimento</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('dataNascimento'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('dataNascimento'))}}</small>
            </div>
            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-calendar dateFormat="dd/mm/yy" formControlName="dataAdmissao"></p-calendar>
                    <label for="float-input">Data Admissão</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('dataAdmissao'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('dataAdmissao'))}}</small>
            </div>
            <div class="col-12 sm:col-2 md:col-2 mt-5">
                <span class="ui-float-label">
                    <p-dropdown [options]="senioridades" placeholder="." optionLabel="nome" [showClear]="true"
                        formControlName="senioridade">
                    </p-dropdown>
                    <label for="float-input">Senioridade</label>
                </span>
                <small *ngIf="deveMostrarMensagemDeValidacao(colaboradorForm.get('senioridade'))" class="p-invalid"
                    style="color: red;">{{mensagemDeValidacao(colaboradorForm.get('senioridade'))}}</small>
            </div>
        </div>
        <div class="grid mt-5 pl-2 pr-2">
            <button type="submit" pButton label="Salvar" class="ui-button-success"
                [disabled]="colaboradorForm.invalid || !colaboradorForm.dirty"></button>
        </div>
    </p-card>
</form>

<form [formGroup]="competenciasForm">
    <div class="grid pl-2 pr-2">
        <p-card class="mt-3">
            <div class="grid mb-3 pl-3 pr-2 align-items-center">
                <h2>Competências do Colaborador</h2>
            </div>
            <div class="grid mb-6 pl-2 pr-2 align-items-center">
                <div class="col-12 sm:col-2 md:col-2 mt-2">
                    <span class="ui-float-label">
                        <p-dropdown [options]="competencias" placeholder="." optionLabel="nome" [showClear]="true"
                            formControlName="competencia">
                        </p-dropdown>
                        <label for="float-input">Competência</label>
                    </span>
                    <small *ngIf="deveMostrarMensagemDeValidacao(competenciasForm.get('competencia'))" class="p-invalid"
                        style="color: red;">{{mensagemDeValidacao(competenciasForm.get('competencia'))}}</small>
                </div>
                <span class="pr-3"></span>
                <div class="col-12 sm:col-2 md:col-2 mt-2">
                    <span class="ui-float-label">
                        <p-dropdown [options]="niveis" placeholder="." [showClear]="true" formControlName="nivel">
                        </p-dropdown>
                        <label for="float-input">Nivel</label>
                    </span>
                    <small *ngIf="deveMostrarMensagemDeValidacao(competenciasForm.get('nivel'))" class="p-invalid"
                        style="color: red;">{{mensagemDeValidacao(competenciasForm.get('nivel'))}}</small>
                </div>
                <span class="pr-3"></span>
                <div class="col-12 sm:col-2 md:col-2 mt-1">
                    <button type="button" icon="ui-icon-plus" pButton (click)="adicionarCompetencias()"></button>
                </div>

                <p-table [value]="colaboradorForm.get('competencias').value" [responsive]="true" class="mt-5">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Competencia</th>
                            <th>Nivel</th>
                            <th>Ações</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-competencia let-rowIndex="rowIndex">
                        <tr>
                            <td class="text-center">{{competencia.nome}}</td>
                            <td class="text-center">{{nivelToLabel(competencia.nivel)}}</td>
                            <td class="text-center">
                                <button type="button" icon="ui-icon-trash" pButton class="ui-button-danger"
                                    (click)="excluirItem(rowIndex)"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </p-card>
    </div>
</form>
